(()=>{"use strict";window&&(window.ScrollAndMouse=class{scrollTargets=[];centerWidth=.3;constructor({scrollSelector:t,watchMouse:e}){this.watchScroll(t),e&&this.watchMouse()}watchMouse(){document.body.style.setProperty("--mX",0),document.body.style.setProperty("--mY",0),document.addEventListener("mousemove",(function(t){var e=2*t.clientX/window.innerWidth-1,o=2*t.clientY/window.innerHeight-1;document.body.style.setProperty("--mX",e),document.body.style.setProperty("--mY",o)}))}watchScrollOutOfView(t){t.inView=!1,t.el.removeAttribute("data-in-view")}watchScrollCb(t){let e=window.innerHeight;for(let t=0;t<this.scrollTargets.length;++t){const o=this.scrollTargets[t];let{el:l,offset:s,inView:r,scrollPos:i}=o;const c=l.getBoundingClientRect(),n=c.height,h=c.top,w=e+n,a=t=>{r=o.inView=!1,l.removeAttribute("data-in-view"),l.style.setProperty("--scroll",Math.round(i)),l.style.setProperty("--scroll-low",Math.round(Math.max(0,(.35-i)/.35))),l.style.setProperty("--scroll-high",Math.round(Math.max(0,(i-.65)/.35))),t&&t()};if(h>=e)r&&a();else if(h<=-1*n)r&&a();else{const t=(e-h)/w;o.scrollPos=t,l.style.setProperty("--scroll",t);const s=r;t<.35?(r=o.inView="low",l.style.setProperty("--scroll-low",(.35-t)/.35)):t<.65?(r=o.inView="mid",l.style.setProperty("--scroll",t),l.style.setProperty("--scroll-low",0),l.style.setProperty("--scroll-high",0)):(r=o.inView="high",l.style.setProperty("--scroll",t),l.style.setProperty("--scroll-high",(t-.65)/.35)),r!==s&&l.setAttribute("data-in-view",r),l.style.setProperty("--scroll",t)}}}watchScrollSetup(){if(this.setupDone)return;let t=!1;this.setupDone=!0,window.addEventListener("scroll",(e=>{t||(window.requestAnimationFrame((()=>{this.watchScrollCb(e),t=!1})),t=!0)})),this.watchScrollCb()}watchScroll(t){document.querySelectorAll(t).forEach((t=>{const e=t.dataset.scrollOffset||window.innerHeight/5;this.scrollTargets.push({el:t,offset:e,inView:!1})})),this.scrollTargets.length&&this.watchScrollSetup()}})})();